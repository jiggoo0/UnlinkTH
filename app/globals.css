/* app/globals.css */
/* =========================================================
   UNLINK PROTOCOL: GLOBAL BASELINE
   ========================================================= */

@import "tailwindcss";
@import "../styles/tokens.css";

/* ---------------------------------------------------------
   Tailwind v4 / Modern Configuration Bridge
--------------------------------------------------------- */
@theme {
  /* มัดรวมค่าพื้นฐานให้ตรงกับ tokens.css */
  --color-background: hsl(var(--color-bg));
  --color-foreground: hsl(var(--color-fg));
  --color-muted-foreground: hsl(var(--color-fg) / 0.65);
  --color-accent: hsl(var(--color-primary) / 0.1);
  --color-accent-foreground: hsl(var(--color-primary));

  --font-sans: var(--font-sans), ui-sans-serif, system-ui;
}

@layer base {
  *,
  *::before,
  *::after {
    box-sizing: border-box;
    border-color: hsl(var(--color-border) / 0.1);
  }

  html {
    scroll-behavior: smooth;
    background-color: var(--color-background);
  }

  body {
    background-color: var(--color-background);
    color: var(--color-foreground);
    font-family: var(--font-sans);
    font-size: 16px;
    line-height: 1.65;
    -webkit-font-smoothing: antialiased;
    text-rendering: optimizeLegibility;
  }
}

/* ---------------------------------------------------------
   Layout Helpers (Fixed: แก้ปัญหา unknown utility class)
--------------------------------------------------------- */
@layer utilities {
  /* แทนที่จะ @apply คลาสที่ Build engine หาไม่เจอ 
     เราใช้ CSS มาตรฐานที่ให้ผลลัพธ์เดียวกันและปลอดภัยกว่า */
  .container {
    width: 100%;
    margin-left: auto;
    margin-right: auto;
    padding-left: 1.5rem;
    padding-right: 1.5rem;
    max-width: 80rem; /* เท่ากับ max-w-7xl */
  }

  .lab-card {
    background-color: hsl(var(--color-muted) / 0.1);
    border: 1px solid hsl(var(--color-border) / 0.5);
    backdrop-filter: blur(8px);
    transition: all var(--duration-base) var(--ease-out);
  }
}

/* ---------------------------------------------------------
   Typography & Interactive
--------------------------------------------------------- */
@layer base {
  h1,
  h2,
  h3,
  h4 {
    font-weight: 600;
    letter-spacing: -0.02em;
    color: var(--color-foreground);
  }

  p {
    color: var(--color-muted-foreground);
  }

  ::selection {
    background-color: var(--color-accent);
    color: var(--color-accent-foreground);
  }
}

/* ---------------------------------------------------------
   Reduced Motion
--------------------------------------------------------- */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}
